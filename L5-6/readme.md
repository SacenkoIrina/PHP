# Лабораторная 5-6

### Как запустить проект?
* Устанавливаем [php](https://www.php.net/)
* Устанавливаем [сomposer](https://getcomposer.org/)
1. Заходим в папку с нашим проектом 
2. Прописываем в консоль: php -S localhost:80 _(название файла)_
3. Переходим по ссылке в консоли

#### **Описание**
В данном проекте мы изучаем такие команды, как fclose(), fwrite, так же, видим разницу в fwrite и file_put_content. Учимся сохранять данные с формы в файл. Создаем форму **Регистрации** с проверкой на заполнение, шифруем пароль при помощи _md5()_, сохраняем данные пользователя в текстовый файл. Создаем форму **Авторизации** с проверкой на заполнение, выводим ошибку в случае неправильного логина или пароля, а в случае, если всё введено корректно, перенаправляем пользователя на страницу с изображениями.

#### **Краткая документация**
* `fwrite()` - это функция в PHP, используемая для записи данных в файл. Возвращает количество записанных байт в случае успеха или false в случае ошибки.
* `fclose()` - это функция в PHP, которая используется для закрытия открытого файла. Закрытие файла освобождает ресурсы, связанные с этим файлом, и позволяет другим процессам или скриптам получить доступ к этому файлу. Не закрывать файл может привести к утечке ресурсов или возникновению проблем с производительностью вашего приложения.
* `feof()` -  это функция в PHP, которая используется для проверки достижения конца файла.
* `fgets()` - это функция в PHP, которая используется для чтения строки из файла.
* `file_put_contents()` -  это функция в PHP, которая используется для записи данных в файл. file_put_contents выполняет схожую функцию с _fwrite()_, но она более проста в использовании, поскольку позволяет записать данные в файл одной строкой кода.
* `md5()` - это функция в PHP, которая используется для создания хэш-суммы (также известной как MD5 хэш) строки. Длина хэша всегда составляет 32 символа (16 байт) для режима по умолчанию.
* `HTTP-код` - HTTP-коды используются для передачи информации о статусе выполнения HTTP-запроса между клиентом (например, браузером) и сервером. Когда клиент отправляет запрос на сервер (например, запрос страницы веб-сайта), сервер обрабатывает этот запрос и отправляет обратно ответ, который включает в себя HTTP-код состояния.

#### **Использование сайта**
1. При помощи fwrite добавляем 3 записи в файл:
```php
<?php
fwrite($file, "6. Alexander Wilson, 1993, 8765443332221\n");
fwrite($file, "7. Christopher Lee, 1985, 3332221114444\n");
fwrite($file, "8. Matthew Taylor, 1994, 1112223334445\n");
```
2. Закрытие файла при помощи fclose():
```php
<?php
 fclose($file);

```

3. Запись в файл при помощи функции file_put_contents():
```php
<?php
file_put_contents("file2.txt", $data) or die("Ошибка создания файла!");

```

4. Пример сохранения данных в файл:
```php
<?php
 $file = fopen('messages.txt', 'a+') or die("Недоступный файл!");
 foreach ($data as $field => $value) {
     fwrite($file, "$field: $value\n");
 }
```

5. Добавление контроллеров в форму:
```php
<form action="<?php echo $_SERVER['SCRIPT_NAME'] ?>" method="post">
 <div>
 <label>Ваше имя: <input name="name" type="text" size="30"></label>
 </div>
 <div>
 <label>Email: <input name="email" type="text" size="30"></label>
 </div>
 <div>
 <label>Возраст: <input name="age" type="number" min="0" max="150"></label>
 </div>
 <div>
 <label>Ваше мнение о нас напишите тут:
 <textarea name="message" cols="40" rows="4" placeholder="Ваше
мнение..."></textarea>
 </label>
 </div>
 <div>
 <input type="reset" value="Стереть"/>
 <input type="submit" value="Передать" name="start"/>
 </div>
</form>
<?php
 $data = [
 'name' => $_POST['name'] ?? "",
 'email' => $_POST['email'] ?? "",
 'age' => $_POST['age'] ?? "",
 'message' => $_POST['message'] ?? "",
 ];
```

6. Создание формы регистрации (Логин и Пароль):
```php
    <form action="register.php" method="post">
        <label for="login">Login:</label><br>
        <input type="text" id="login" name="login"><br>
        <label for="password">Password:</label><br>
        <input type="password" id="password" name="password"><br><br>
        <input type="submit" value="Register">
    </form>
```

7. Проверка на заполненность полей:
```php
<?php
    if (!empty($_POST['login']) && !empty($_POST['password'])) {
        $login = $_POST['login'];
        $password = md5($_POST['password']); 
        }

```

8. Сохранение данных пользователя в файл:
```php
<?php
        $userData = "$login:$password\n";
        file_put_contents('users.txt', $userData, FILE_APPEND);

```

9. Проверка при авторизации на существование _логина_ и _пароля_
```php
<?php

        $users = file('users.txt', FILE_IGNORE_NEW_LINES);
        $found = false;
        foreach ($users as $user) {
            list($savedLogin, $savedPassword) = explode(':', $user);
            if ($savedLogin === $login && $savedPassword === $password) {
                $found = true;
                break;
            }
        }
```

##### Данный код представляет собой веб-сайты, написанные на HTML с использованием вставок PHP. Некоторые служат для вывода информации на сайте и ее сохренения в файл. Другие сохраняют данные формы в файл. И последние два служат для регистрации и авторизации пользователя, и, в случае верных данных перенаправления на сайт с изображениями.