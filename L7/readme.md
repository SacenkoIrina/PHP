# Лабораторная №7

## Инструкции по запуску проекта.
1. Устанавливаем php.
2. Устанавливаем сomposer. 
3. Заходим в папку с проектом.
    1. Открываем командную строку (терминал).
    2. Прописываем в терминал: php -S localhost:80
4. Переходим по ссылке в терминале.
## Описание лабораторной работы.
В данном проекте была создан веб-сайт с помощью HTML и PHP. Основной функционал включает в себя работа с сессией и определение переменных типа сессии в мини-веб-приложении, так чтобы правильно реализовать вход и выход пользователя.
## Краткая документация к проекту.
`<?php` `?>` - это открывающий и закрывающий теги соответственно для PHP кода.

`echo` и `print` - это две основные конструкции в языке программирования PHP для вывода данных на экран или веб-страницу.

Символ `$` на языке PHP обозначает начало имени переменной.

```php
<?php if ($_SERVER["REQUEST_METHOD"] == "POST"): ?>
    <div id="result"> 
        <p>Ваше имя: <b><?php echo $_POST["name"] ?></b></p> 
        <p>Ваш e-mail: <b><?php echo $_POST["email"] ?></b></p> 
        <p>Оценка товара: <b><?php echo $_POST["review"] ?></b></p> 
        <p>Ваше сообщение: <b><?php echo $_POST["comment"] ?></b></p> 
    </div> 
<?php endif; ?>
```
Этот блок PHP-кода проверяет, была ли форма отправлена методом POST. Если условие выполняется (т.е. форма отправлена), то код внутри этого блока будет выполнен.

`<!DOCTYPE html>` Объявление типа документа.
`<html lang="en">` Открывающий тег для корня HTML-документа с указанием языка (английский).
`<head>` Секция заголовка документа, содержащая метаданные и ссылки на внешние ресурсы.
`<meta charset="UTF-8">` Указание кодировки документа.
`<meta name="viewport" content="width=device-width, initial-scale=1.0">` Указание метаинформации о масштабировании для мобильных устройств.
`<title>Пример формы для продуктов</title>` Заголовок страницы.
`<style>` Внутренние стили CSS для страницы.
`<body>` Тело HTML-документа.
`<form id="productForm">` Форма для добавления продукта с уникальным идентификатором productForm.
`<div id="main_info">` Основная часть формы с полями для ввода данных о продукте.
`<div class="message" id="successMessage">` Сообщение об успешном добавлении продукта.
`<script>` Блок скрипта JavaScript для обработки отправки формы.

```php
if ($_SERVER["REQUEST_METHOD"] == "POST") {
    // Проверяем, что все необходимые поля заполнены
    if (isset($_POST['name']) && isset($_POST['email']) && isset($_POST['comment']) && isset($_POST['agree'])) {
        // Получаем данные из формы
        $name = $_POST['name'];
        $email = $_POST['email'];
        $comment = $_POST['comment'];
```
Эти строки на PHP создают проверяют, была ли отправлена форма методом `POST`, а затем проверяет, все ли обязательные поля заполнены. Если все поля заполнены, код извлекает данные из формы (имя, email, комментарий) и выводит их на экран. Если какое-то поле не заполнено, он выводит сообщение об ошибке.

```php
    <form method="post" action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]); ?>">
        <label for="username">Введите ваше имя:</label>
        <input type="text" id="username" name="username" required><br><br>
```
Этот фрагмент HTML-кода создает форму с текстовым полем для ввода имени пользователя.

`<form>` Элемент формы определяет контейнер для элементов управления вводом данных. Атрибут `method="post"` указывает, что данные формы будут отправлены методом `POST` при нажатии кнопки отправки `<input type="submit">`. Это означает, что данные будут отправлены на сервер в теле HTTP-запроса, а не в URL-адресе, что обеспечивает более безопасную передачу данных, особенно для чувствительной информации.
`action="<?php echo htmlspecialchars($_SERVER["PHP_SELF"]); ?>"` Атрибут `action` определяет адрес, на который будут отправлены данные формы при ее отправке. Здесь используется `htmlspecialchars($_SERVER["PHP_SELF"])`, чтобы указать адрес текущего скрипта PHP `$_SERVER["PHP_SELF"]` и обезопасить его от возможных атак XSS, заменив специальные символы HTML на их эквиваленты.

`<tr>` `</tr>` - открывает и закрывает строку таблицы.

`<br>` - это одиночный тег, который используется для создания переноса строки.

`<b>` `</b>` - это тег, который используется для придания обычному тексту полужирный шрифт.

## Примеры использования проекта с приложением фрагментов кода.
```php
$error = false; // Флаг ошибки

if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $name = $_POST["name"];
    $email = $_POST["email"];
    $review = $_POST["review"];
    $comment = $_POST["comment"];

    // Проверка на заполненность всех полей и корректность e-mail
    if (empty($name) || empty($email) || !filter_var($email, FILTER_VALIDATE_EMAIL)) {
        $error = true; // Устанавливаем флаг ошибки
    }
}
```
Этот PHP-код выполняет следующие действия:

1. Устанавливает переменную $error в значение `false`, что означает, что ошибок пока нет.
2. Проверяет, была ли форма отправлена методом `POST`.
3. Если форма была отправлена, код извлекает значения из полей формы (имя, электронная почта, оценка товара, комментарий) и присваивает их соответствующим переменным.
4. Затем происходит проверка на заполненность всех обязательных полей (имя и электронная почта) и корректность электронной почты с помощью функции `filter_var()` и флага `FILTER_VALIDATE_EMAIL`.
5. Если какое-либо обязательное поле не заполнено или электронная почта не проходит проверку, переменная `$error` устанавливается в значение `true`, что означает, что произошла ошибка
```php
    if ($_SERVER["REQUEST_METHOD"] == "POST") {
        $username = $_POST['username'];
        $answers = array(
            'question1' => $_POST['question1'],
            'question2' => isset($_POST['question2']) ? $_POST['question2'] : array(),
            'question3' => $_POST['question3']
        );
```
Этот фрагмент кода выполняет обработку данных формы после их отправки методом POST. 
`$_SERVER["REQUEST_METHOD"] == "POST"` Проверка, была ли форма отправлена методом `POST`. Если это так, код продолжает выполнение, чтобы обработать данные.
`$username = $_POST['username'];` Извлечение значения имени пользователя из массива `$_POST`. Здесь `'username'` - это имя поля ввода в HTML-форме.
`$answers = array(...)` Формирование массива ответов на вопросы. Каждый ответ представляет собой значение, выбранное пользователем в соответствующем поле ввода формы. Для вопроса 2, который содержит чекбоксы (позволяющие выбор нескольких вариантов ответа), используется тернарный оператор для проверки наличия выбранных ответов в массиве `$_POST['question2']`. Если чекбоксы не были выбраны, используется пустой массив.
## Вывод.
Работая над данной лабораторной работой, я написала коды на языке PHP, которые демонстрирует использование обработки форм, то есть PHP скрипты получают данные, отправленные пользователем через формы на веб-страницах с помощью глобальной переменной `$_POST`. Так же эта работа демонстрирует валидацию данных, значит PHP проверяет данные, полученные от пользователя, на наличие ошибок или недопустимых значений. Таким образом, веб-сайт, созданный с использованием HTML и PHP, предоставляет пользователю возможность взаимодействия с веб-приложением, отправку и получение данных, а также выполнение различных операций на стороне сервера.

Ответ на вопрос: 
Чем отличается глобальная переменная `$_REQUEST` и `$_POST`? 

Главное различие между `$_REQUEST` и `$_POST` заключается в источнике данных: `$_REQUEST` объединяет данные из `POST` и `GET`, тогда как `$_POST` содержит только данные из `POST`. В большинстве случаев, если известно, что данные были отправлены методом `POST`, предпочтительнее использовать `$_POST` для повышения безопасности и ясности кода.